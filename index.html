<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TM-zone - Your Front Row Seat to Politics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .fade-in {
            animation: fadeIn 1s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .hidden {
            display: none;
        }
        .modal-enter {
            animation: modal-enter 0.3s ease-out;
        }
        .modal-leave {
            animation: modal-leave 0.3s ease-in;
        }
        @keyframes modal-enter {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes modal-leave {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.95); }
        }
    </style>
</head>
<body class="bg-black text-gray-200">

    <!-- Header Section -->
    <header class="bg-black shadow-lg sticky top-0 z-50 fade-in border-b border-yellow-500/30">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="nav-link" data-target="home-page">
                <img src="TM_logo (1).png" alt="TM-zone Logo" class="h-12">
            </a>
            <div class="hidden md:flex space-x-6 items-center">
                <a href="#" class="text-gray-300 hover:text-yellow-400 transition duration-300 nav-link" data-target="home-page">Home</a>
                <a href="#" class="text-gray-300 hover:text-yellow-400 transition duration-300 nav-link" data-target="politics-page" data-category="Politics">Politics</a>
                <a href="#" class="text-gray-300 hover:text-yellow-400 transition duration-300 nav-link" data-target="world-news-page" data-category="World News">World News</a>
                <a href="#" class="text-gray-300 hover:text-yellow-400 transition duration-300 nav-link" data-target="opinion-page" data-category="Opinion">Opinion</a>
                <a href="#" id="dashboard-link" class="hidden text-gray-300 hover:text-yellow-400 transition duration-300 nav-link" data-target="admin-page">Dashboard</a>
                <a href="#" id="login-btn" class="text-gray-300 hover:text-yellow-400 transition duration-300">Login</a>
                <a href="#" id="logout-btn" class="hidden text-gray-300 hover:text-yellow-400 transition duration-300">Logout</a>
                <a href="#" id="subscribe-btn" class="bg-yellow-500 text-black font-semibold px-4 py-2 rounded-md hover:bg-yellow-600 transition duration-300 cursor-pointer">Subscribe</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden text-gray-300 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-2 bg-black border-t border-yellow-500/30">
            <!-- Mobile links will be dynamically updated based on login state -->
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-8">
        
        <!-- Home Page -->
        <div id="home-page" class="page-content">
            <!-- Featured Post -->
            <section id="featured-post-section" class="mb-12 fade-in" style="animation-delay: 200ms;"></section>
            <section>
                <h2 class="text-3xl font-bold mb-8 text-center text-white fade-in" style="animation-delay: 400ms;">Latest Articles</h2>
                <div id="posts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
                <div class="text-center mt-12">
                    <button id="load-more-btn" class="bg-yellow-500 text-black font-semibold px-6 py-3 rounded-lg hover:bg-yellow-600 transition duration-300 transform hover:scale-105">Load More Posts</button>
                </div>
            </section>
        </div>

        <!-- Category Pages -->
        <div id="politics-page" class="page-content hidden fade-in">
            <h1 class="text-4xl font-bold text-center mb-8">Politics</h1>
            <div class="category-posts-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        </div>
        <div id="world-news-page" class="page-content hidden fade-in">
            <h1 class="text-4xl font-bold text-center mb-8">World News</h1>
            <div class="category-posts-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        </div>
        <div id="opinion-page" class="page-content hidden fade-in">
            <h1 class="text-4xl font-bold text-center mb-8">Opinion</h1>
            <div class="category-posts-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        </div>

        <!-- Single Post Page -->
        <div id="single-post-page" class="page-content hidden fade-in">
            <button id="back-btn" class="mb-8 bg-gray-800 px-4 py-2 rounded-lg hover:bg-gray-700 transition">&larr; Back to Posts</button>
            <div id="post-content" class="bg-gray-900 rounded-lg shadow-xl p-8 md:p-12"></div>
        </div>

        <!-- Admin Page -->
        <div id="admin-page" class="page-content hidden fade-in">
            <div class="flex flex-wrap justify-between items-center gap-4 mb-8">
                <h1 class="text-4xl font-bold">Publisher Dashboard</h1>
                <button id="create-post-btn" class="bg-yellow-500 text-black font-semibold px-6 py-2 rounded-lg hover:bg-yellow-600 transition">Create New Post</button>
            </div>
            <div class="bg-gray-900 rounded-lg shadow-xl overflow-x-auto">
                <table class="w-full text-left">
                    <thead class="bg-black">
                        <tr>
                            <th class="p-4 font-semibold">Title</th>
                            <th class="p-4 font-semibold">Category</th>
                            <th class="p-4 font-semibold">Status</th>
                            <th class="p-4 font-semibold">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="admin-posts-table"></tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <div id="modal-backdrop" class="hidden fixed inset-0 bg-black bg-opacity-70 z-50"></div>

    <!-- Subscription Modal -->
    <div id="subscribe-modal" class="hidden fixed inset-0 flex items-center justify-center z-[60] p-4">
        <div class="bg-gray-900 border border-yellow-500/50 rounded-lg shadow-2xl p-8 w-full max-w-md text-center modal-enter" id="modal-content">
            <h2 class="text-2xl font-bold mb-4">Stay Updated!</h2>
            <p class="text-gray-400 mb-6">Subscribe to our newsletter.</p>
            <form id="subscribe-form">
                <input type="email" placeholder="your.email@example.com" class="w-full px-4 py-2 border border-gray-600 rounded-md mb-4 bg-gray-800 text-white" required>
                <button type="submit" class="w-full bg-yellow-500 text-black font-semibold py-2 rounded-md hover:bg-yellow-600 transition">Subscribe Now</button>
            </form>
            <button class="close-modal-btn absolute top-4 right-4 text-gray-400 hover:text-white" data-modal="subscribe-modal">&times;</button>
        </div>
    </div>
    
    <!-- Login Modal -->
    <div id="login-modal" class="hidden fixed inset-0 flex items-center justify-center z-[60] p-4">
        <div class="bg-gray-900 border border-yellow-500/50 rounded-lg shadow-2xl p-8 w-full max-w-md text-center modal-enter" id="login-modal-content">
            <h2 class="text-2xl font-bold mb-4">Publisher Login</h2>
            <p id="login-error" class="text-red-500 mb-4 hidden">Invalid credentials.</p>
            <form id="login-form">
                <input type="password" id="password-input" placeholder="Enter password" class="w-full px-4 py-2 border border-gray-600 rounded-md mb-4 bg-gray-800 text-white" required>
                <button type="submit" class="w-full bg-yellow-500 text-black font-semibold py-2 rounded-md hover:bg-yellow-600 transition">Login</button>
            </form>
            <button class="close-modal-btn absolute top-4 right-4 text-gray-400 hover:text-white" data-modal="login-modal">&times;</button>
        </div>
    </div>

    <!-- Post Form Modal -->
    <div id="post-form-modal" class="hidden fixed inset-0 flex items-center justify-center z-[60] p-4">
        <div class="bg-gray-900 border border-yellow-500/50 rounded-lg shadow-2xl p-8 w-full max-w-2xl modal-enter" id="post-form-modal-content">
            <h2 id="post-form-title" class="text-2xl font-bold mb-6">Create New Post</h2>
            <form id="post-form" class="space-y-4">
                <input type="hidden" id="post-id-input">
                <div>
                    <label for="post-title" class="block mb-1 font-medium">Title</label>
                    <input type="text" id="post-title" class="w-full px-4 py-2 border border-gray-600 rounded-md bg-gray-800 text-white" required>
                </div>
                <div>
                    <label for="post-category" class="block mb-1 font-medium">Category</label>
                     <select id="post-category" class="w-full px-4 py-2 border border-gray-600 rounded-md bg-gray-800 text-white" required>
                        <option>Politics</option>
                        <option>World News</option>
                        <option>Opinion</option>
                    </select>
                </div>
                <div>
                    <label for="post-image" class="block mb-1 font-medium">Image URL</label>
                    <input type="text" id="post-image" class="w-full px-4 py-2 border border-gray-600 rounded-md bg-gray-800 text-white" required>
                </div>
                <div>
                    <label for="post-description" class="block mb-1 font-medium">Description</label>
                    <textarea id="post-description" rows="3" class="w-full px-4 py-2 border border-gray-600 rounded-md bg-gray-800 text-white" required></textarea>
                </div>
                <div class="flex justify-end space-x-4">
                    <button type="button" class="close-modal-btn px-6 py-2 bg-gray-700 rounded-md hover:bg-gray-600" data-modal="post-form-modal">Cancel</button>
                    <button type="submit" class="px-6 py-2 bg-yellow-500 text-black font-semibold rounded-md hover:bg-yellow-600">Save Post</button>
                </div>
            </form>
        </div>
    </div>
    
    <footer class="bg-black border-t border-yellow-500/30 mt-12">
         <div class="container mx-auto px-6 py-4 text-center text-gray-400">
            <p>&copy; 2025 TM-zone. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let lastPage = 'home-page';

            // --- STATE MANAGEMENT ---
            let allPosts = [
                { id: 1, category: 'Politics', title: 'Global Tensions: A New Cold War?', description: 'Analyzing the shifting alliances and rising conflicts that are redefining international relations.', image: 'https://placehold.co/600x400/ca8a04/111827?text=Politics', isFeatured: true },
                { id: 2, category: 'Politics', title: "Healthcare Reform: What's Next?", description: 'A deep dive into the ongoing debate over healthcare and what new proposals could mean for you.', image: 'https://placehold.co/600x400/ca8a04/111827?text=Politics', isFeatured: false },
                { id: 3, category: 'Opinion', title: 'The Echo Chamber: Is Social Media Dividing Us?', description: 'An exploration of how algorithms and online discourse are impacting political polarization.', image: 'https://placehold.co/600x400/ca8a04/111827?text=Opinion', isFeatured: false },
                { id: 4, category: 'World News', title: 'Inflation and the Economy: A Look Ahead', description: 'Experts weigh in on the future of the economy and the potential for a recession.', image: 'https://placehold.co/600x400/ca8a04/111827?text=World+News', isFeatured: false },
                { id: 5, category: 'Politics', title: 'New Bill Aims to Tackle Climate Change', description: 'Inside the new landmark legislation and its potential impact on the environment and industry.', image: 'https://placehold.co/600x400/ca8a04/111827?text=Politics', isFeatured: false },
                { id: 6, category: 'Politics', title: 'Tracking Midterm Election Promises', description: 'Are politicians keeping their campaign promises? We investigate the progress so far.', image: 'https://placehold.co/600x400/ca8a04/111827?text=Politics', isFeatured: false }
            ];
            let postsToShow = 3;
            let isLoggedIn = false;

            // --- ELEMENT SELECTORS ---
            const pages = document.querySelectorAll('.page-content');
            const navLinks = document.querySelectorAll('.nav-link');
            const postsGrid = document.getElementById('posts-grid');
            const loadMoreBtn = document.getElementById('load-more-btn');
            const backBtn = document.getElementById('back-btn');
            const postContentEl = document.getElementById('post-content');
            const featuredPostSection = document.getElementById('featured-post-section');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const adminPostsTable = document.getElementById('admin-posts-table');
            
            // --- AUTH & MODAL SELECTORS ---
            const modalBackdrop = document.getElementById('modal-backdrop');
            const loginBtn = document.getElementById('login-btn');
            const logoutBtn = document.getElementById('logout-btn');
            const dashboardLink = document.getElementById('dashboard-link');
            const loginForm = document.getElementById('login-form');
            const loginError = document.getElementById('login-error');
            const createPostBtn = document.getElementById('create-post-btn');
            const postForm = document.getElementById('post-form');

            // --- GENERAL FUNCTIONS ---
            function showPage(pageId) {
                if (pageId !== 'single-post-page') {
                    lastPage = pageId;
                }
                pages.forEach(page => page.classList.add('hidden'));
                document.getElementById(pageId)?.classList.remove('hidden');
                window.scrollTo(0, 0);
                mobileMenu.classList.add('hidden');
            }

            function openModal(modalId) {
                modalBackdrop.classList.remove('hidden');
                document.getElementById(modalId)?.classList.remove('hidden');
            }

            function closeModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    const content = modal.querySelector('.modal-enter');
                    content?.classList.add('modal-leave');
                    setTimeout(() => {
                        modal.classList.add('hidden');
                        content?.classList.remove('modal-leave');
                        modalBackdrop.classList.add('hidden');
                    }, 300);
                }
            }
            
            // --- UI UPDATE FUNCTIONS ---
            function updateNavLinks() {
                const navLinkHTML = (target, category, text) => `<a href="#" class="block py-2 text-gray-300 hover:text-yellow-400 nav-link" data-target="${target}" ${category ? `data-category="${category}"` : ''}>${text}</a>`;
                
                const loggedOutLinks = `
                    ${navLinkHTML('home-page', null, 'Home')}
                    ${navLinkHTML('politics-page', 'Politics', 'Politics')}
                    ${navLinkHTML('world-news-page', 'World News', 'World News')}
                    ${navLinkHTML('opinion-page', 'Opinion', 'Opinion')}
                    <a href="#" id="mobile-login-btn" class="block py-2 text-gray-300 hover:text-yellow-400">Login</a>
                    <a href="#" id="mobile-subscribe-btn" class="block mt-2 bg-yellow-500 text-black font-semibold px-4 py-2 rounded-md hover:bg-yellow-600 text-center">Subscribe</a>`;
                
                const loggedInLinks = `
                    ${navLinkHTML('home-page', null, 'Home')}
                    ${navLinkHTML('admin-page', null, 'Dashboard')}
                    <a href="#" id="mobile-logout-btn" class="block py-2 text-gray-300 hover:text-yellow-400">Logout</a>
                    <a href="#" id="mobile-subscribe-btn" class="block mt-2 bg-yellow-500 text-black font-semibold px-4 py-2 rounded-md hover:bg-yellow-600 text-center">Subscribe</a>`;

                mobileMenu.innerHTML = isLoggedIn ? loggedInLinks : loggedOutLinks;
                
                document.getElementById('mobile-subscribe-btn')?.addEventListener('click', (e) => { e.preventDefault(); openModal('subscribe-modal'); });
                if (isLoggedIn) {
                    document.getElementById('mobile-logout-btn')?.addEventListener('click', handleLogout);
                } else {
                    document.getElementById('mobile-login-btn')?.addEventListener('click', (e) => { e.preventDefault(); openModal('login-modal'); });
                }
                
                mobileMenu.querySelectorAll('.nav-link').forEach(link => link.addEventListener('click', handleNavLinkClick));

                loginBtn.classList.toggle('hidden', isLoggedIn);
                logoutBtn.classList.toggle('hidden', !isLoggedIn);
                dashboardLink.classList.toggle('hidden', !isLoggedIn);
            }
            
            function handleNavLinkClick(e) {
                e.preventDefault();
                const pageId = e.currentTarget.dataset.target;
                const category = e.currentTarget.dataset.category;
                if (category) {
                    renderCategoryPage(pageId, category);
                }
                showPage(pageId);
            }

            // --- AUTHENTICATION ---
            function handleLogin(e) {
                e.preventDefault();
                const password = document.getElementById('password-input').value;
                if (password === 'admin123') { // Simple password check
                    isLoggedIn = true;
                    loginError.classList.add('hidden');
                    updateNavLinks();
                    closeModal('login-modal');
                    showPage('admin-page');
                } else {
                    loginError.classList.remove('hidden');
                }
            }

            function handleLogout(e) {
                e.preventDefault();
                isLoggedIn = false;
                updateNavLinks();
                showPage('home-page');
            }

            // --- POST RENDERING (PUBLIC) ---
            function createPostCard(post) {
                const card = document.createElement('div');
                card.className = `post-card bg-gray-900 rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300 fade-in`;
                card.innerHTML = `
                    <img class="w-full h-48 object-cover" src="${post.image}" alt="Blog post image">
                    <div class="p-6">
                        <p class="text-sm text-yellow-400">${post.category}</p>
                        <h3 class="text-xl font-bold mt-2 mb-3 text-white">${post.title}</h3>
                        <p class="text-gray-400 text-sm mb-4">${post.description}</p>
                        <a href="#" class="read-more-link text-yellow-500 font-semibold hover:underline">Read More &rarr;</a>
                    </div>`;
                card.querySelector('.read-more-link').addEventListener('click', (e) => {
                    e.preventDefault();
                    showSinglePost(post);
                });
                return card;
            }

            function renderFeaturedPost() {
                const featuredPost = allPosts.find(p => p.isFeatured) || allPosts[0];
                if (!featuredPost) {
                    featuredPostSection.innerHTML = '';
                    return;
                };
                featuredPostSection.innerHTML = `
                    <div class="bg-gray-900 rounded-lg shadow-xl overflow-hidden md:flex">
                        <div class="md:w-1/2">
                            <img class="h-64 w-full object-cover md:h-full" src="${featuredPost.image}" alt="Featured blog post image">
                        </div>
                        <div class="p-8 md:w-1/2 flex flex-col justify-center">
                            <p class="text-yellow-400 font-semibold">${featuredPost.category}</p>
                            <h1 class="text-3xl md:text-4xl font-bold text-white mt-2 mb-4">${featuredPost.title}</h1>
                            <p class="text-gray-400 mb-6">${featuredPost.description}</p>
                            <div class="flex items-center">
                                <img class="w-12 h-12 rounded-full mr-4" src="https://placehold.co/100x100/e2e8f0/333333?text=A" alt="Author avatar">
                                <div>
                                    <p class="font-semibold text-gray-200">Admin</p>
                                    <p class="text-sm text-gray-400">${new Date().toLocaleDateString()} &middot; 8 min read</p>
                                </div>
                            </div>
                        </div>
                    </div>`;
            }

            function renderPublicPosts() {
                postsGrid.innerHTML = '';
                const postsToRender = allPosts.slice(0, postsToShow);
                postsToRender.forEach(post => postsGrid.appendChild(createPostCard(post)));
                loadMoreBtn.classList.toggle('hidden', postsToShow >= allPosts.length);
            }

             function renderCategoryPage(pageId, category) {
                const page = document.getElementById(pageId);
                const grid = page.querySelector('.category-posts-grid');
                grid.innerHTML = '';
                const categoryPosts = allPosts.filter(post => post.category === category);
                if (categoryPosts.length > 0) {
                    categoryPosts.forEach(post => grid.appendChild(createPostCard(post)));
                } else {
                    grid.innerHTML = `<p class="text-center col-span-3 text-gray-400">No posts found in this category.</p>`;
                }
            }

            function showSinglePost(post) {
                postContentEl.innerHTML = `
                    <p class="text-lg text-yellow-400 font-semibold mb-4">${post.category}</p>
                    <h1 class="text-4xl md:text-5xl font-bold text-white mb-6">${post.title}</h1>
                    <img class="w-full h-auto max-h-96 object-cover rounded-lg mb-8" src="${post.image}" alt="">
                    <div class="prose prose-lg prose-invert max-w-none">
                       <p>${post.description}</p>
                       <p>This is a sample full post content. In a real application, this would be fetched from a database and could contain much more information formatted with HTML.</p>
                       <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                    </div>`;
                showPage('single-post-page');
            }

            // --- POST MANAGEMENT (ADMIN) ---
            function renderAdminTable() {
                adminPostsTable.innerHTML = '';
                allPosts.forEach(post => {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-gray-700';
                    row.innerHTML = `
                        <td class="p-4">${post.title}</td>
                        <td class="p-4">${post.category}</td>
                        <td class="p-4">${post.isFeatured ? '<span class="text-green-400 font-semibold">Featured</span>' : '-'}</td>
                        <td class="p-4 space-x-2 whitespace-nowrap">
                            <button class="feature-btn text-green-500 hover:underline" data-id="${post.id}">${post.isFeatured ? 'Unfeature' : 'Feature'}</button>
                            <button class="edit-btn text-yellow-400 hover:underline" data-id="${post.id}">Edit</button>
                            <button class="delete-btn text-red-500 hover:underline" data-id="${post.id}">Delete</button>
                        </td>`;
                    adminPostsTable.appendChild(row);
                });
            }
            
            function openPostForm(post = null) {
                postForm.reset();
                if (post) {
                    document.getElementById('post-form-title').innerText = 'Edit Post';
                    document.getElementById('post-id-input').value = post.id;
                    document.getElementById('post-title').value = post.title;
                    document.getElementById('post-category').value = post.category;
                    document.getElementById('post-image').value = post.image;
                    document.getElementById('post-description').value = post.description;
                } else {
                    document.getElementById('post-form-title').innerText = 'Create New Post';
                    document.getElementById('post-id-input').value = '';
                }
                openModal('post-form-modal');
            }

            function handlePostFormSubmit(e) {
                e.preventDefault();
                const postId = document.getElementById('post-id-input').value;
                const newPostData = {
                    title: document.getElementById('post-title').value,
                    category: document.getElementById('post-category').value,
                    image: document.getElementById('post-image').value,
                    description: document.getElementById('post-description').value,
                };
                if (postId) { // Editing existing post
                    const postIndex = allPosts.findIndex(p => p.id == postId);
                    allPosts[postIndex] = { ...allPosts[postIndex], ...newPostData };
                } else { // Creating new post
                    newPostData.id = Date.now(); // Simple unique ID
                    newPostData.isFeatured = false;
                    allPosts.unshift(newPostData);
                }
                renderAll();
                closeModal('post-form-modal');
            }

            function handleDeletePost(postId) {
                if (confirm('Are you sure you want to delete this post?')) {
                    allPosts = allPosts.filter(p => p.id != postId);
                    renderAll();
                }
            }

            function handleFeaturePost(postId) {
                allPosts.forEach(p => p.isFeatured = (p.id == postId));
                renderAll();
            }
            
            function renderAll() {
                renderFeaturedPost();
                renderPublicPosts();
                renderAdminTable();
            }

            // --- EVENT LISTENERS ---
            navLinks.forEach(link => link.addEventListener('click', handleNavLinkClick));

            mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            loadMoreBtn.addEventListener('click', () => {
                postsToShow += 3;
                renderPublicPosts();
            });
            backBtn.addEventListener('click', () => showPage(lastPage));
            
            // Modals
            document.querySelectorAll('.close-modal-btn').forEach(btn => 
                btn.addEventListener('click', () => closeModal(btn.dataset.modal))
            );
            document.getElementById('subscribe-btn').addEventListener('click', () => openModal('subscribe-modal'));
            
            // Auth
            loginBtn.addEventListener('click', () => openModal('login-modal'));
            logoutBtn.addEventListener('click', handleLogout);
            loginForm.addEventListener('submit', handleLogin);
            
            // Admin Actions
            createPostBtn.addEventListener('click', () => openPostForm());
            postForm.addEventListener('submit', handlePostFormSubmit);
            adminPostsTable.addEventListener('click', (e) => {
                const target = e.target;
                const postId = target.dataset.id;
                if (!postId) return;

                if (target.classList.contains('edit-btn')) {
                    const post = allPosts.find(p => p.id == postId);
                    openPostForm(post);
                }
                if (target.classList.contains('delete-btn')) {
                    handleDeletePost(postId);
                }
                if (target.classList.contains('feature-btn')) {
                    handleFeaturePost(postId);
                }
            });

            // --- INITIAL LOAD ---
            renderAll();
            updateNavLinks();
            showPage('home-page');
        });
    </script>
</body>
</html>

